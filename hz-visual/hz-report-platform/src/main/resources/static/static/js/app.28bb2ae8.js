(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{"/mUW":function(e,t,n){"use strict";var i=n("3Jjm");n.n(i).a},"3Jjm":function(e,t,n){},"7Qib":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return s});n("EPZ6"),n("Q2cO");function i(e){return/^(https?:|mailto:|tel:)/.test(e)}var r=n("6Cps"),o=r.enc.Utf8.parse("1234123412ABCDEF"),a=r.enc.Utf8.parse("ABCDEF1234123412");function l(e){var t=r.enc.Hex.parse(e),n=r.enc.Base64.stringify(t),i=r.AES.decrypt(n,o,{iv:a,mode:r.mode.CBC,padding:r.pad.Pkcs7}).toString(r.enc.Utf8).toString(),l=i.substr(-32);return i.split(l)[0]}function s(e){var t=r.enc.Utf8.parse(e+function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}());return r.AES.encrypt(t,o,{iv:a,mode:r.mode.CBC,padding:r.pad.Pkcs7}).ciphertext.toString().toUpperCase()}},"8Xku":function(e,t,n){},Bq29:function(e,t,n){},HK11:function(e,t,n){"use strict";var i=n("Bq29");n.n(i).a},HiAn:function(e,t,n){},INx1:function(e,t,n){},L48I:function(e,t,n){"use strict";var i=n("lnxG");n.n(i).a},LXR0:function(e,t,n){"use strict";var i=n("rARe");n.n(i).a},N4Kv:function(e,t,n){"use strict";var i=n("hk9y");n.n(i).a},PAdZ:function(e,t,n){},"Pe8+":function(e,t,n){"use strict";var i=n("euga");n.n(i).a},Q2AE:function(e,t,n){"use strict";var i=n("AmEZ"),r=n("8t5x"),o={},a={state:{cacheViews:[]},mutations:{ADD_CACHEVIEW:function(e,t){e.cacheViews.includes(t.name)||t.meta&&t.meta.keepAlive&&e.cacheViews.push(t.name)}},actions:{addCachedView:function(e,t){(0,e.commit)("ADD_CACHEVIEW",t)}}},l={sidebar:function(e){return e.app.sidebar},device:function(e){return e.app.device},token:function(e){return e.user.token},accessUser:function(e){return e.user.accessUser},cacheViews:function(e){return e.cacheView.cacheViews}},s={},u=n("jJIE"),c=n.n(u),d={state:{sidebar:{opened:!+c.a.get("sidebarStatus"),withoutAnimation:!1},device:"desktop"},mutations:{TOGGLE_SIDEBAR:function(e){e.sidebar.opened?c.a.set("sidebarStatus",1):c.a.set("sidebarStatus",0),e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1},CLOSE_SIDEBAR:function(e,t){c.a.set("sidebarStatus",1),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:function(e,t){e.device=t}},actions:{ToggleSideBar:function(e){(0,e.commit)("TOGGLE_SIDEBAR")},CloseSideBar:function(e,t){(0,e.commit)("CLOSE_SIDEBAR",t.withoutAnimation)},ToggleDevice:function(e,t){(0,e.commit)("TOGGLE_DEVICE",t)}}},f=n("Asgo"),p=n.n(f),h=n("dVUk"),m=n("X4fA"),b={state:{token:"",accessUser:{}},mutations:{SET_TOKEN:function(e,t){e.token=t,Object(m.j)(t)},SET_ACCESSUSER:function(e,t){e.accessUser=t,Object(m.h)(t)}},actions:{Login:function(e,t){var n=e.commit,i={userName:t.userName.trim(),password:t.password.trim(),captchaVerification:t.captchaVerification.trim()};return new p.a(function(e,t){Object(h.a)(i).then(function(i){var r=i.repCode,o=i.repData;"0000"===r?(n("SET_TOKEN",o.token),n("SET_ACCESSUSER",o.accessUser),e(i)):t(i.repMsg)}).catch(function(e){t(e)})})},LogOut:function(e){var t=e.commit,n=e.state;return new p.a(function(e,i){Object(h.b)(n.token).then(function(){t("SET_TOKEN",""),t("SET_ACCESSUSER",{}),Object(m.c)(),Object(m.b)(),Object(m.a)(),e()}).catch(function(e){i(e)})})},FedLogOut:function(e){var t=e.commit;return new p.a(function(e){t("SET_TOKEN",""),t("SET_ACCESSUSER",{}),Object(m.c)(),Object(m.b)(),Object(m.a)(),e()})}}},v={state:{id:0,val:"",title:""},mutations:{setCategory:function(e,t){e.id=0,e.val=t.value,e.title=t.label}}};i.default.use(r.a);var g=new r.a.Store({modules:{app:d,user:b,cacheView:a,help:v},state:{},plugins:[function(e){}],actions:o,mutations:s,getters:l});t.a=g},RXVF:function(e,t,n){"use strict";var i=n("gaEW");n.n(i).a},S0BH:function(e,t,n){"use strict";var i=n("PAdZ");n.n(i).a},SiB1:function(e,t,n){"use strict";var i=n("INx1");n.n(i).a},VGgK:function(e,t,n){},Vtdi:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"basecode",function(){return le}),n.d(i,"getDataByCode",function(){return se}),n.d(i,"fixed",function(){return ue}),n.d(i,"formatTimestamp",function(){return ce}),n.d(i,"formatDate",function(){return de});var r=n("EPZ6"),o=n.n(r),a=n("AmEZ"),l=n("Y7hl"),s=n.n(l),u=(n("HC+d"),n("CaXw")),c=n.n(u),d=(n("qpO2"),n("HiAn"),n("aGE4"),n("vjVy"),n("sm2R")),f={name:"App",provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!1}},watch:{$route:function(e,t){"/login"==e.path&&this.queryDictName()}},computed:{},created:function(){this.queryDictName()},methods:{queryDictName:function(){var e=this;Object(d.b)(function(){e.isRouterAlive=!0})},reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}}},p=n("ZrdR"),h=Object(p.a)(f,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.isRouterAlive?t("router-view"):this._e()],1)},[],!1,null,null,null);h.options.__file="App.vue";var m=h.exports,b=n("uOVN"),v=n("bS4n"),g=n.n(v),y=n("cLjf"),w=n.n(y),x=n("hDQ3"),C=n.n(x),k=n("8t5x"),F=n("wu4H"),S=n.n(F),_={data:function(){return{levelList:null}},watch:{$route:function(){this.getBreadcrumb()}},computed:{levelListArr:function(){return this.levelList.filter(function(e){return e.meta&&e.meta.title})}},created:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){var e=this.$route.params,t=this.$route.matched.filter(function(t){if(t.name){var n=S.a.compile(t.path);return t.path=n(e),!0}});this.levelList=t}}},j=(n("/mUW"),Object(p.a)(_,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:"/"}},[n("transition-group",{attrs:{name:"breadcrumb"}},e._l(e.levelListArr,function(t,i){return n("el-breadcrumb-item",{key:t.path},["noredirect"===t.redirect||i==e.levelListArr.length-1?n("span",{staticClass:"no-redirect"},[e._v(e._s(t.meta.title))]):n("router-link",{staticClass:"no-redirect",attrs:{to:t.redirect||t.path}},[e._v(e._s(t.meta.title))])],1)}),1)],1)},[],!1,null,"2b5df056",null));j.options.__file="index.vue";var O=j.exports,D={name:"Hamburger",props:{isActive:{type:Boolean,default:!1},toggleClick:{type:Function,default:null}}},q=(n("S0BH"),Object(p.a)(D,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("svg",{staticClass:"hamburger",class:{"is-active":this.isActive},attrs:{t:"1492500959545",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1691","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"64",height:"64"},on:{click:this.toggleClick}},[t("path",{attrs:{d:"M966.8023 568.849776 57.196677 568.849776c-31.397081 0-56.850799-25.452695-56.850799-56.850799l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 543.397081 998.200404 568.849776 966.8023 568.849776z","p-id":"1692",fill:"#333"}}),this._v(" "),t("path",{attrs:{d:"M966.8023 881.527125 57.196677 881.527125c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 856.07443 998.200404 881.527125 966.8023 881.527125z","p-id":"1693",fill:"#333"}}),this._v(" "),t("path",{attrs:{d:"M966.8023 256.17345 57.196677 256.17345c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.850799 56.850799-56.850799l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.850799l0 0C1023.653099 230.720755 998.200404 256.17345 966.8023 256.17345z","p-id":"1694",fill:"#333"}})])])},[],!1,null,"54298247",null));q.options.__file="index.vue";var T=q.exports,B=n("XS0u"),E=n("dVUk"),A=n("sxct"),P={data:function(){var e=this;return{wordVisible:!1,form:{oldPassword:"",password:"",confirmPassword:""},rules:{oldPassword:[{required:!0,validator:function(e,t,n){t.length<6||t.length>30?n(new Error("请输入原密码")):n()},trigger:"blur"}],password:[{required:!0,message:"请选择新密码",trigger:"blur"}],confirmPassword:[{required:!0,validator:function(t,n,i){""===n?i(new Error("请再次输入密码")):n!==e.form.password?i(new Error("两次输入密码不一致!")):n.length<6||n.length>20?i(new Error("密码长度需要再6-20之间!")):i()},trigger:"blur"}]},centerDialogVisible:!1}},components:{Breadcrumb:O,Hamburger:T},computed:g()({},Object(k.c)(["sidebar"])),created:function(){},methods:{toggleSideBar:function(){this.$store.dispatch("ToggleSideBar")},logout:function(){var e=this;this.$confirm("确定要退出吗","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){sessionStorage.clear(),localStorage.clear(),e.$router.push("/login")})},updatePassword:function(){var e=this;this.wordVisible=!0,this.$nextTick(function(){e.$refs.form&&e.$refs.form.resetFields()})},confrimUpdate:function(){var e=this;this.$refs.form.validate(function(){var t=C()(w.a.mark(function t(n){var i,r,o,a,l,s;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=16;break}return i=e.form,r=i.oldPassword,o=i.password,a=i.confirmPassword,l={oldPassword:Object(A.a)(r),password:Object(A.a)(o),confirmPassword:Object(A.a)(a)},t.next=5,Object(E.c)(l);case 5:if(s=t.sent,"200"==s.code){t.next=9;break}return t.abrupt("return");case 9:e.wordVisible=!1,e.$message.success("修改密码成功,请重新登录"),sessionStorage.clear(),localStorage.clear(),e.$router.push("/login"),t.next=17;break;case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())},helpCenter:function(){var e=Object(B.b)("helpCategory");this.$router.push({path:"/helpCenList/list",query:{id:0,val:e[0].value,title:e[0].label}})}}},$=(n("dW6S"),Object(p.a)(P,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-menu",{staticClass:"navbar",attrs:{mode:"horizontal"}},[n("hamburger",{staticClass:"hamburger-container",attrs:{"toggle-click":e.toggleSideBar,"is-active":e.sidebar.opened}}),e._v(" "),n("breadcrumb")],1),e._v(" "),n("el-dialog",{staticClass:"password-box",attrs:{title:"修改密码",visible:e.wordVisible,width:"40%","close-on-click-modal":!1,top:"20vh"},on:{"update:visible":function(t){e.wordVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules,"close-on-click-modal":!1}},[n("el-form-item",{attrs:{label:"原密码",prop:"oldPassword"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.oldPassword,callback:function(t){e.$set(e.form,"oldPassword","string"==typeof t?t.trim():t)},expression:"form.oldPassword"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"新密码",prop:"password"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"==typeof t?t.trim():t)},expression:"form.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"确认新密码",prop:"confirmPassword"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword","string"==typeof t?t.trim():t)},expression:"form.confirmPassword"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.wordVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.confrimUpdate}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"说明",visible:e.centerDialogVisible,width:"34%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[n("div",{staticStyle:{"font-size":"30px","line-height":"50px","margin-bottom":"50px"}},[e._v("\n      AJ-Report由"),n("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"http://www.anji-plus.com/",target:"_blank"}},[n("b",[e._v("安吉加加信息技术有限公司")])]),e._v("遵循 "),n("a",{staticStyle:{"word-wrap":"break-word"},attrs:{href:"http://www.apache.org/licenses/LICENSE-2.0.html",target:"_blank"}},[n("strong",{staticStyle:{color:"orangered"}},[e._v("Apache2.0开源协议")])]),e._v("在"),n("a",{staticStyle:{"text-decoration":"underline","word-wrap":"break-word"},attrs:{href:"https://gitee.com/explore",target:"_blank"}},[n("b",[e._v("Gitee平台")])]),e._v("进行开源。\n    ")]),e._v(" "),n("div",{staticStyle:{"font-size":"30px","line-height":"50px"}},[n("strong",{staticStyle:{color:"orangered"}},[e._v("个人/商业使用须遵循Apache2.0开源协议。")]),e._v(" "),n("strong",{staticStyle:{color:"orangered"}},[e._v("禁止将AJ-Report产品用于违法违规业务。")])]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("确 定")])],1)])],1)},[],!1,null,"4b2f678d",null));$.options.__file="Navbar.vue";var R=$.exports,I=n("YmYf"),N=n.n(I),L=n("7Qib"),M={name:"MenuItem",functional:!0,props:{icon:{type:String,default:""},title:{type:String,default:""}},render:function(e,t){var n=t.props,i=n.icon,r=n.title,o=[];return i&&o.push(e("i",{class:"iconfont "+i})),r&&o.push(e("span",{slot:"title"},[r])),o}},U=Object(p.a)(M,void 0,void 0,!1,null,null,null);U.options.__file="Item.vue";var V=U.exports,z={props:{to:{type:String,required:!0}},methods:{isExternalLink:function(e){return Object(L.c)(e)},linkProps:function(e){return this.isExternalLink(e)?{is:"a",href:e,target:"_blank",rel:"noopener"}:{is:"router-link",to:e}}}},H=Object(p.a)(z,function(){var e=this.$createElement;return(this._self._c||e)("component",this._b({},"component",this.linkProps(this.to),!1),[this._t("default")],2)},[],!1,null,null,null);H.options.__file="Link.vue";var Q={name:"SidebarItem",components:{Item:V,AppLink:H.exports},props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},data:function(){return{onlyOneChild:null}},computed:{},methods:{hasOneShowingChild:function(e,t){var n=this,i=e.filter(function(e){return!e.hidden&&(n.onlyOneChild=e,!0)});return 1===i.length||0===i.length&&(this.onlyOneChild=g()({},t,{path:"",noShowingChildren:!0}),!0)},resolvePath:function(e){return this.isExternalLink(e)?e:N.a.resolve(this.basePath,e)},isExternalLink:function(e){return Object(L.c)(e)}}},J=(n("L48I"),Object(p.a)(Q,function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.item.hidden&&e.item.children?n("div",{staticClass:"menu-wrapper"},[!e.hasOneShowingChild(e.item.children,e.item)||e.onlyOneChild.children&&!e.onlyOneChild.noShowingChildren||e.item.alwaysShow?[e.hasPermission(e.item.meta.permission)?n("el-submenu",{attrs:{index:e.resolvePath(e.item.path)}},[n("template",{slot:"title"},[n("item",{attrs:{icon:e.item.meta.icon,title:e.item.meta.title}})],1),e._v(" "),e._l(e.item.children,function(t){return[e.hasPermission(t.meta.permission)&&1!=t.hidden?[t.children&&t.children.length>0?n("sidebar-item",{key:t.path,staticClass:"nest-menu",attrs:{"is-nest":!0,item:t,"base-path":e.resolvePath(t.path)}}):e._e(),e._v(" "),n("app-link",{key:t.name,attrs:{to:e.resolvePath(t.path)}},[n("el-menu-item",{attrs:{index:e.resolvePath(t.path)}},[t.meta?n("item",{attrs:{icon:t.meta.icon,title:t.meta.title}}):e._e()],1)],1)]:e._e()]})],2):e._e()]:[n("app-link",{attrs:{to:e.resolvePath(e.onlyOneChild.path)}},[n("el-menu-item",{class:{"submenu-title-noDropdown":!e.isNest},attrs:{index:e.resolvePath(e.onlyOneChild.path)}},[e.onlyOneChild.meta?n("item",{attrs:{icon:e.onlyOneChild.meta.icon||e.item.meta.icon,title:e.onlyOneChild.meta.title}}):e._e()],1)],1)]],2):e._e()},[],!1,null,"2b0b07e3",null));J.options.__file="SidebarItem.vue";var G={components:{SidebarItem:J.exports},computed:g()({},Object(k.c)(["sidebar"]),{routes:function(){return this.$router.options.routes},isCollapse:function(){return!this.sidebar.opened}}),methods:{goBigScreen:function(){var e=this.$router.resolve({path:"/report/bigScreen"});window.open(e.href,"_blank")}}},K=(n("LXR0"),Object(p.a)(G,function(){var e=this.$createElement,t=this._self._c||e;return t("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[t("div",{staticClass:"admin-title",on:{click:this.goBigScreen}}),this._v(" "),t("el-menu",{attrs:{"show-timeout":200,"default-active":this.$route.path,collapse:this.isCollapse,mode:"vertical"}},this._l(this.routes,function(e){return t("sidebar-item",{key:e.path,attrs:{item:e,"base-path":e.path}})}),1)],1)},[],!1,null,"6491af17",null));K.options.__file="index.vue";var W=K.exports,X={name:"AppMain",computed:g()({},Object(k.c)(["cacheViews"]),{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date}})},Y=(n("SiB1"),Object(p.a)(X,function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"app-main"},[t("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[t("keep-alive",{attrs:{include:this.cacheViews}},[t("router-view")],1)],1)],1)},[],!1,null,"7d0fa904",null));Y.options.__file="AppMain.vue";var Z=Y.exports,ee=n("Q2AE"),te=document.body,ne={name:"Layout",components:{Navbar:R,Sidebar:W,AppMain:Z},watch:{$route:{handler:function(e,t){"realTimeLog"!=e.name&&"deviceInfo"!=e.name&&Object(B.a)("deviceInfo"),"helpCenter"!=e.name&&"helpCenterEdit"!=e.name&&Object(B.a)("helpCenterDetail"),this.addCachedView(e)},immediate:!0}},mixins:[{watch:{$route:function(e){"mobile"===this.device&&this.sidebar.opened&&ee.a.dispatch("CloseSideBar",{withoutAnimation:!1})}},beforeMount:function(){window.addEventListener("resize",this.resizeHandler)},mounted:function(){this.isMobile()&&(ee.a.dispatch("ToggleDevice","mobile"),ee.a.dispatch("CloseSideBar",{withoutAnimation:!0}))},methods:{isMobile:function(){return te.getBoundingClientRect().width-3<1024},resizeHandler:function(){if(!document.hidden){var e=this.isMobile();ee.a.dispatch("ToggleDevice",e?"mobile":"desktop"),e&&ee.a.dispatch("CloseSideBar",{withoutAnimation:!0})}}}}],computed:{sidebar:function(){return this.$store.state.app.sidebar},device:function(){return this.$store.state.app.device},classObj:function(){return{hideSidebar:!this.sidebar.opened,openSidebar:this.sidebar.opened,withoutAnimation:this.sidebar.withoutAnimation,mobile:"mobile"===this.device}}},methods:g()({},Object(k.b)(["addCachedView"]),{handleClickOutside:function(){this.$store.dispatch("CloseSideBar",{withoutAnimation:!1})}})},ie=(n("fu5x"),Object(p.a)(ne,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-wrapper",class:this.classObj},["mobile"===this.device&&this.sidebar.opened?t("div",{staticClass:"drawer-bg",on:{click:this.handleClickOutside}}):this._e(),this._v(" "),t("sidebar",{staticClass:"sidebar-container"}),this._v(" "),t("div",{staticClass:"main-container"},[t("app-main")],1)],1)},[],!1,null,"a7c83be8",null));ie.options.__file="Layout.vue";var re=ie.exports;a.default.use(b.a);var oe=[{path:"/login",component:function(){return n.e("chunk-d1e5").then(n.bind(null,"3Xui"))},hidden:!0},{path:"/aj/**",component:function(){return n.e("chunk-2592").then(n.bind(null,"TiKq"))},hidden:!0},{path:"/el/**",component:function(){return n.e("chunk-be14").then(n.bind(null,"iRo7"))},hidden:!0},{path:"/report",name:"report",component:re,meta:{title:"报表设计",icon:"iconnavicon-ywcs",requireAuth:!0,permission:"datasourceManage|resultsetManage|reportManage|bigScreenManage"},children:[{path:"datasource",name:"datasource",component:function(){return n.e("chunk-474e").then(n.bind(null,"ZjmF"))},meta:{title:"数据源",icon:"icondatabase",keepAlive:!0,requireAuth:!0,permission:"datasourceManage"}},{path:"resultset",name:"resultset",component:function(){return Promise.all([n.e("chunk-24b5"),n.e("chunk-696f"),n.e("chunk-efce")]).then(n.bind(null,"Zzv2"))},meta:{title:"数据集",icon:"iconAPIwangguan",keepAlive:!0,requireAuth:!0,permission:"resultsetManage"}},{path:"report",name:"reportIndex",component:function(){return n.e("chunk-06a8").then(n.bind(null,"0MlO"))},meta:{title:"报表管理",icon:"iconnavicon-ywcs",keepAlive:!0,requireAuth:!0,permission:"reportManage"}},{path:"bigscreen",name:"bigscreen",component:function(){return n.e("chunk-86f2").then(n.bind(null,"b//P"))},meta:{title:"大屏报表",icon:"iconchufaqipeizhi-hui",keepAlive:!0,requireAuth:!0,permission:"bigScreenManage"}},{path:"reportshare",name:"reportshare",component:function(){return n.e("chunk-e5bc").then(n.bind(null,"RteH"))},meta:{title:"报表分享",icon:"iconfenxiang1",keepAlive:!0,requireAuth:!0,permission:"reportShareManage"}}]},{path:"/bigscreen/viewer",component:function(){return Promise.all([n.e("chunk-6b46"),n.e("chunk-e4a7"),n.e("chunk-79d4")]).then(n.bind(null,"OnRN"))},hidden:!0,meta:{requireAuth:!0}},{path:"/bigscreen/designer",component:function(){return Promise.all([n.e("chunk-6b46"),n.e("chunk-24b5"),n.e("chunk-f079"),n.e("chunk-0d37"),n.e("chunk-465b")]).then(n.bind(null,"VZcz"))},hidden:!0,meta:{requireAuth:!0}},{path:"/excelreport/viewer",component:function(){return n.e("chunk-625d").then(n.bind(null,"+N4U"))},hidden:!0,meta:{requireAuth:!0}},{path:"/excelreport/designer",component:function(){return Promise.all([n.e("chunk-f079"),n.e("chunk-6efb")]).then(n.bind(null,"Xvat"))},hidden:!0,meta:{requireAuth:!0}},{path:"/screenDesigner",component:function(){return Promise.all([n.e("chunk-6b46"),n.e("chunk-24b5"),n.e("chunk-f079"),n.e("chunk-0d37"),n.e("chunk-b9f7")]).then(n.bind(null,"rAJX"))},name:"screenDesigner"},{path:"/screen/preview",component:function(){return Promise.all([n.e("chunk-6b46"),n.e("chunk-e4a7"),n.e("chunk-5f52")]).then(n.bind(null,"3sGO"))},hidden:!0,meta:{requireAuth:!0}},{path:"/404",component:function(){return n.e("chunk-fd33").then(n.bind(null,"jNvO"))},hidden:!0},{path:"*",redirect:"/report/bigscreen",hidden:!0}],ae=new b.a({scrollBehavior:function(){return{y:0}},routes:oe});function le(e,t){if(void 0===e||null===e)return"";if(void 0===t||null===t)return e;for(var n=Object(B.b)("queryForCodeSelect")[t],i=e,r=0;r<n.length;r++){var o=n[r];if(o.value==e||o.labelEng==e){i=o.label;break}}return i}function se(e){var t=le[this.keyCode],n=[];for(var i in t)n.push({value:i,text:t[i]});return n}function ue(e){var t=null;return"string"==typeof e&&/^[0-9.]+$/.test(e)&&(t=parseInt(e)),"number"==typeof e&&(t=e),null==t?e:(Math.round(100*e)/100).toFixed(2)}function ce(e){if(null==e)return"";var t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var r=t.getDate();r=r<10?"0"+r:r;var o=t.getHours();o=o<10?"0"+o:o;var a=t.getMinutes(),l=t.getSeconds();return n+"-"+i+"-"+r+" "+o+":"+(a=a<10?"0"+a:a)+":"+(l=l<10?"0"+l:l)}function de(e){if(null==e)return"";var t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var r=t.getDate();return n+"-"+i+"-"+(r=r<10?"0"+r:r)}var fe,pe=n("X4fA"),he={data:function(){return{}},computed:{operator:function(){return this.getUser.loginName},operatorText:function(){return this.getUser.realName+"["+this.getUser.loginName+"]"},operatorToken:function(){return Object(pe.f)()},getUser:function(){var e=Object(pe.d)();return null!=e?e:{}},opAuthorities:function(){return null==this.getUser?[]:this.getUser.authorities}},created:function(){},mounted:function(){},destroyed:function(){},methods:{hasPermission:function(e){return Object(pe.g)(e)}}},me=n("/umX"),be=n.n(me),ve=n("6ZY3"),ge=n.n(ve),ye=n("rerW"),we=n.n(ye),xe=n("omC7"),Ce=n.n(xe),ke=n("Q2cO"),Fe=n.n(ke),Se=n("jJIE"),_e=n.n(Se),je={data:function(){return{}},computed:{bodyWidth:function(){return document.body.clientWidth},bodyHeight:function(){return document.body.clientHeight}},created:function(){},mounted:function(){},destroyed:function(){},methods:(fe={setCookies:function(e,t,n){null==n&&(n={expires:15}),_e.a.set(e,t,n)},goBack:function(){this.$router.go(-1)},refresh:function(){this.$router.go(0)},parseString:function(e){return void 0===e||null==e?"":"number"==typeof e?e.toString():"boolean"==typeof e?e.toString():"object"===(void 0===e?"undefined":Fe()(e))?Ce()(e):""},isBlank:function(e){return void 0===e||(null==e||""===e)},contains:function(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return!1},getUrlKey:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},resetForm:function(e){var t=o()(e),n=!0,i=!1,r=void 0;try{for(var a,l=we()(t);!(n=(a=l.next()).done);n=!0){e[a.value]=null}}catch(e){i=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw r}}},sortArray:function(e){return function(t,n){var i=t[e],r=n[e];return i<r?-1:i>r?1:0}},getObjectType:function(e){var t=Object.prototype.toString;return e instanceof Element?"element":{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[t.call(e)]},isNumber:function(e){return"number"==this.getObjectType(e)},isString:function(e){return"string"==this.getObjectType(e)},isArray:function(e){return"array"==this.getObjectType(e)},hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},isNotBlank:function(e){return!this.isBlank(e)}},be()(fe,"isBlank",function(e){if(this.isNull(e))return!0;if("string"==typeof e)return""==e.trim();if("object"===(void 0===e?"undefined":Fe()(e))){for(var t in e)return!1;return!0}return!1}),be()(fe,"isNotNull",function(e){return!this.isNull(e)}),be()(fe,"isNull",function(e){if(e&&0===parseInt(e))return!1;if(e instanceof Date||"boolean"==typeof e||"number"==typeof e)return!1;if(!(e instanceof Array)){if(e instanceof Object){for(var t in e=this.deepClone(e),["$parent"].forEach(function(t){delete e[t]}),e)return!1;return!0}return"null"===e||null==e||"undefined"===e||void 0===e||""===e}return 0===e.length}),be()(fe,"deepClone",function(e){var t=this,n=this.getObjectType(e),i=void 0;if("array"===n)i=[];else{if("object"!==n)return e;i={}}if("array"===n)for(var r=function(n,r){e[n]=(e[n],e[n]),e[n]&&delete e[n].$parent,i.push(t.deepClone(e[n]))},o=0,a=e.length;o<a;o++)r(o);else if("object"===n)for(var l in e)e&&delete e.$parent,i[l]=this.deepClone(e[l]);return i}),be()(fe,"mergeObject",function(){var e=arguments[0]||{},t=!1,n=Array.prototype.slice.call(arguments),i=1,r=void 0,o=void 0,a=void 0,l=void 0,s=!1;for("boolean"==typeof e&&(t=e,i++,e=arguments[1]);i<n.length;i++)if(null!=(r=n[i]))for(a in r)l=r[a],o=e[a],t&&("[object Object]"===toString.call(l)||(s="[object Array]"==toString.call(l)))?(o=s?"[object Array]"===toString.call(o)?o:[]:"[object Object]"===toString.call(o)?o:{},e[a]=this.mergeObject(t,o,l)):void 0!==l&&l!==o&&(e[a]=l);return e}),be()(fe,"getDomTopLeftById",function(e){var t=document.getElementById(e),n=0,i=0;return null!=t&&(n=t.getBoundingClientRect().top,i=t.getBoundingClientRect().left),{top:n,left:i}}),be()(fe,"objToOne",function(e){console.log(e);var t={};for(var n in e)if("object"!=Fe()(e[n])||this.isArrayFn(e[n]))t[n]=e[n];else{var i=this.objToOne(e[n]);ge()(t,i)}return t}),be()(fe,"isArrayFn",function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}),be()(fe,"urlEncode",function(e){return encodeURIComponent(e)}),be()(fe,"urlDecode",function(e){return decodeURIComponent(e)}),be()(fe,"urlEncodeObject",function(e,t){if("[object Object]"!=toString.call(e))return e;var n={};for(var i in e)this.isBlank(e[i])||(null!=t&&t.indexOf(i)>=0?n[i]=e[i]:n[i]=this.urlEncode(e[i]));return n}),be()(fe,"getDictItemByCode",function(e,t){var n=Object(B.b)("AJReportDict");if(!n.hasOwnProperty(e))return null;for(var i=n[e],r=0;r<i.length;r++){var o=i[r];if("number"==typeof t&&(t=t.toString()),o.id.toString()==t)return o}return null}),be()(fe,"getDictLabelByCode",function(e,t){var n=this.getDictItemByCode(e,t);return null!=n?n.text:""}),be()(fe,"getDictExtendByCode",function(e,t){var n=this.getDictItemByCode(e,t);if(null==n)return null;var i=n.extend;return null==i||"null"==i.trim()?null:n.extend}),be()(fe,"getSettingByName",function(e){var t=JSON.parse(localStorage.getItem("AJReportDict"));return null!=t[e]?t[e]:null}),fe)},Oe=n("GiRh"),De=n.n(Oe),qe=n("Asgo"),Te=n.n(qe),Be=n("vqL+"),Ee=n.n(Be),Ae=n("ba/L"),Pe={mixins:[he,je,{data:function(){return{selectInput:{keyname:"",keyword:""},datetimeRangePickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var t=new Date,n=new Date(new Date((new Date).getTime()).setHours(0,0,0,0));e.$emit("pick",[n,t])}},{text:"昨天",onClick:function(e){var t=new Date(new Date((new Date).getTime()-864e5).setHours(0,0,0,0)),n=new Date(new Date((new Date).getTime()-864e5).setHours(23,59,59,999));e.$emit("pick",[t,n])}},{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(Ee()().add(-1,"ww").stamp()),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(Ee()().add(-1,"MM").stamp()),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(Ee()().add(-3,"MM").stamp()),e.$emit("pick",[n,t])}}]}}},computed:{},created:function(){},mounted:function(){},destroyed:function(){},methods:{search:function(){this.params.currentPage=1,this.queryByPage()},parseParamsBySelectInput:function(e,t){void 0!==this.params&&null!==this.params?void 0!==t&&(this.params[e]=t.trim()):console.warn("query form must bind to params object in vue data")},resetForm:function(e){var t=o()(e),n=!0,i=!1,r=void 0;try{for(var a,l=we()(t);!(n=(a=l.next()).done);n=!0){e[a.value]=null}}catch(e){i=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw r}}},handlerInputchange:function(e){this.parseParamsBySelectInput(this.selectInput.keyname,e)},queryEchartsData:function(e){var t=this;return new Te.a(function(){var n=C()(w.a.mark(function n(i){var r,o,a,l;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ae.d)(e);case 2:if(r=n.sent,o=r.code,a=r.data,200==o){n.next=7;break}return n.abrupt("return");case 7:l=t.analysisChartsData(e,a),i(l);case 9:case"end":return n.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}())},analysisChartsData:function(e,t){var n=e.chartType;return"widget-barchart"==n||"widget-linechart"==n||"widget-barlinechart"==n?this.barOrLineChartFn(e.chartProperties,t):"widget-piechart"==n||"widget-funnel"==n?this.piechartFn(e.chartProperties,t):"widget-text"==n?this.widgettext(e.chartProperties,t):"widget-stackchart"==n?this.stackChartFn(e.chartProperties,t):"widget-coord"==n?this.coordChartFn(e.chartProperties,t):"widget-linemap"==n?this.linemapChartFn(e.chartProperties,t):t},barOrLineChartFn:function(e,t){var n={},i=[],r=[];for(var o in e){var a={},l=[],s=e[o];a.type=s,a.name=o;for(var u=0;u<t.length;u++)s.startsWith("xAxis")?i[u]=t[u][o]:l[u]=t[u][o];a.data=l,a.type.startsWith("xAxis")||r.push(a)}return n.xAxis=i,n.series=r,n},stackChartFn:function(e,t){var n={},i=[],r=De()(e),a=o()(e)[r.indexOf("xAxis")],l=o()(e)[r.indexOf("yAxis")],s=(o()(e)[r.indexOf("bar")],this.setUnique(t.map(function(e){return e[a]}))),u=this.setUnique(t.map(function(e){return e[l]})),c=this.setGroupBy(t,l),d=function(t){"yAxis"===e[t]||e[t].startsWith("xAxis")||o()(c).forEach(function(n){var r=new Array(s.length).fill(0);c[n].forEach(function(e){r[s.indexOf(e[a])]=e[t]}),i.push({name:u[n],type:e[t],data:r})})};for(var f in e)d(f);return n.xAxis=s,n.series=i,n},piechartFn:function(e,t){for(var n=[],i=0;i<t.length;i++){var r={};for(var o in e){"name"===e[o]?r.name=t[i][o]:r.value=t[i][o]}n.push(r)}return n},widgettext:function(e,t){for(var n=[],i=0;i<t.length;i++){var r={};for(var o in e){"name"===e[o]||(r.value=t[i][o])}n.push(r)}return n},coordChartFn:function(e,t){var n={},i=[],r=De()(e),a=o()(e)[r.indexOf("xAxis")],l=o()(e)[r.indexOf("yAxis")],s=o()(e)[r.indexOf("series")],u=this.setUnique(t.map(function(e){return e[a]})),c=this.setUnique(t.map(function(e){return e[l]}));for(var d in n.xAxis=u,n.yAxis=c,t)i[d]=[t[d][a],t[d][l],t[d][s]];return n.series=i,n},linemapChartFn:function(e,t){for(var n=[],i=0;i<t.length;i++){var r={};for(var o in e){var a=e[o];"source"===a?r.source=t[i][o]:"target"===a?r.target=t[i][o]:r.value=t[i][o]}n.push(r)}return n},setUnique:function(e){var t=[];return e.forEach(function(e){return t.includes(e)?"":t.push(e)}),t},setGroupBy:function(e,t){var n={};return e.forEach(function(e){var i=Ce()(e[t]);n[i]=n[i]||[],n[i].push(e)}),o()(n).map(function(e){return n[e]})}},watch:{"selectInput.keyname":function(e,t){this.resetForm(this.params),this.params.currentPage=1,this.params.pageSize=10,this.parseParamsBySelectInput(e,this.selectInput.keyword)},"selectInput.keyword":function(e,t){this.selectInput.keyname&&this.parseParamsBySelectInput(this.selectInput.keyname,e)}}}]},$e=(n("TSjp"),n("KlA9")),Re=(n("ZyKJ"),n("WPhU"),n("sYqA")),Ie=n("t3Un"),Ne={props:{dictCode:null,url:null,allowCreate:{type:Boolean,default:!1},method:{type:String,default:"get"},queryParam:{type:Object,default:function(){return{}}},value:null,placeholder:null,label:{type:String,default:"text"},option:{type:String,default:"id"},multiple:null,localOptions:null,disabled:null,clearable:{type:Boolean,default:!0},collapseTags:{type:Boolean,default:!1},mergeLabel:{type:Boolean,default:!0},disabledOptions:{type:String,default:function(){return""}},remoteFilter:{type:Boolean,default:!1}},data:function(){return{options:null,selectValue:null,totalPage:0}},computed:{requestUrl:function(){return this.localOptions?null:null!=this.url&&""!=this.url.trim()?(this.url.indexOf("?")>0&&(this.option,this.label),this.url):null!=this.dictCode&&""!=this.dictCode.trim()?"/meta/gaeaDict/select/"+this.dictCode:null}},watch:{dictCode:function(e){e&&this.queryData()},localOptions:function(e){this.options=e},value:{handler:function(e){"string"==typeof e&&null!=this.url&&""!=this.url.trim()&&this.remoteQuery(e),null!=this.multiple?this.value?this.selectValue=this.value:this.selectValue=[]:null!=this.value&&void 0!=this.value?this.selectValue=this.value+"":this.selectValue=""},immediate:!0},url:function(){var e=this;setTimeout(function(){e.queryData()},500)}},created:function(){null!=this.multiple?this.selectValue=this.value:null!=this.value&&(this.selectValue=this.value+"")},mounted:function(){null!=this.requestUrl?this.queryData():this.options=this.localOptions},methods:{isDisabledOption:function(e){if(null==e||null==this.disabledOptions||0==this.disabledOptions.length)return!1;var t=e[this.option];return this.disabledOptions.indexOf(t)>=0},change:function(e){var t=this;""===e&&(e=""),this.$emit("input",e);var n=this.options.find(function(n){return n[t.option]==e});this.$emit("change",e,n)},getItemLabel:function(e,t){if(t.indexOf("${")<0&&t.indexOf(!1))return e[t];for(var n=t.match(/\$\{[a-zA-Z0-9]*\}/g),i=t,r=0;r<n.length;r++){var o=n[r],a=o.replace("${","").replace("}","");i=i.replace(o,e[a])}return i},getOptionsFromLocalStorage:function(){var e=JSON.parse(localStorage.getItem("AJReportDict")),t=[];if(!e.hasOwnProperty(this.dictCode))return[];for(var n=e[this.dictCode],i=0;i<n.length;i++){var r=n[i];t.push({id:r.id.toString(),text:r.text,extend:r.extend})}return t},queryData:function(){var e=this.getOptionsFromLocalStorage();this.isNotBlank(e)?this.options=e:null!=this.requestUrl&&(null!=this.method&&"post"==this.method.toLocaleLowerCase().trim()?this.queryDataByPost():this.queryDataByGet())},queryDataByGet:function(e){var t=this,n=this.deepClone(this.queryParam);this.isNotBlank(e)&&(n.keyword=e),n.multiple=null==this.multiple?null:1,Object(Ie.a)({url:this.requestUrl,headers:{noPrompt:!0},params:n}).then(function(e){t.setOptions(e.data)})},queryDataByPost:function(e){var t=this,n=this.deepClone(this.queryParam);this.isNotBlank(e)&&(n.keyword=e),Object(Ie.a)({url:this.requestUrl,method:"post",headers:{noPrompt:!0},data:n}).then(function(e){t.setOptions(e.data)})},setOptions:function(e){return null==e||0==e.length?(this.options=[],void(this.totalPage=0)):this.isArray(e)?(this.options=e,void(this.totalPage=1)):void(null!=e.records&&null!=e.total&&null!=e.pages?(this.totalPage=e.pages,this.options=e.records):this.options=[])},remoteQuery:function(e){var t=this;setTimeout(function(){null!=t.method&&"post"==t.method.toLocaleLowerCase().trim()?t.queryDataByPost(e):t.queryDataByGet(e)},200)}}},Le=(n("xtsh"),Object(p.a)(Ne,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-select",{staticClass:"filter-item",attrs:{clearable:e.clearable,"allow-create":!!e.allowCreate,"default-first-option":!!e.allowCreate,"collapse-tags":e.collapseTags,filterable:"",placeholder:e.placeholder,disabled:e.disabled,multiple:null!=e.multiple,remote:e.remoteFilter,"remote-method":e.remoteQuery},on:{change:e.change},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[e._l(e.options,function(t,i){return n("el-option",{key:i,attrs:{label:e.getItemLabel(t,e.label),value:t[e.option]+"",disabled:e.isDisabledOption(t)}},[e.mergeLabel?[n("span",{staticStyle:{float:"left"}},[e._v(e._s(e.getItemLabel(t,e.label)))]),e._v(" "),e.dictCode||e.localOptions?e._e():n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t[e.option]))])]:e._e()],2)}),e._v(" "),e.totalPage>=1?n("el-option",{attrs:{value:"",disabled:""}},[e._v("输入关键词搜索更多")]):e._e()],2)],1)},[],!1,null,"0c1d06d6",null));Le.options.__file="anji-select.vue";var Me=Le.exports,Ue={props:{upLoadUrl:{type:String,default:function(){return""}},viewUrl:{type:String,default:function(){return""}},limit:{type:Number,default:function(){return 3}},value:{type:Array|String}},data:function(){return{imageUploadUrl:"",fileList:[],modeString:""}},computed:{requestUrl:function(){return null!=this.upLoadUrl&&""!=this.upLoadUrl.trim()?"./aj/"+this.upLoadUrl:"./aj/file/upload"},headers:function(){return{Authorization:Object(pe.f)()}}},watch:{value:function(e){this.echoUpload(e)}},mounted:function(){this.echoUpload(this.value)},methods:{handleRemove:function(e){this.fileList=[],console.log(this.fileList),console.log(this.limit),this.change()},handleExceed:function(){this.$message.warning("只能上传"+this.limit+"个文件")},handleDownload:function(e){window.open(e.url)},handleSuccess:function(e,t,n){200==e.code?(this.fileList.push({url:t.response.data.urlPath,fileId:t.response.data.fileId,fileType:t.response.data.fileType}),console.log(this.fileList),this.change()):this.$message.error("上传失败")},change:function(){var e=this.fileList;console.log(e),this.$emit("input",e),this.$emit("change",e)},handleBeforeUpload:function(e){var t=e.name.split(".")[e.name.split(".").length-1].toLowerCase();return!(["png","jpg","gif","icon","pdf","xlsx","xls","csv","mp4","avi"].indexOf(t)<0)||(this.$message.warning("请上传正确的格式文件"),!1)},echoUpload:function(e){console.log(e),e&&e.length>0?this.fileList=[{url:e}]:this.fileList=[]}}},Ve=(n("Pe8+"),Object(p.a)(Ue,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uploadImage"},[n("el-upload",{attrs:{headers:e.headers,limit:e.limit,action:e.requestUrl,"list-type":"picture-card","file-list":e.fileList,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"show-file-list":!0,"before-upload":e.handleBeforeUpload},scopedSlots:e._u([{key:"file",fn:function(t){var i=t.file;return n("div",{staticClass:"imgBox"},[n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:i.url,alt:""}}),e._v(" "),n("span",{staticClass:"el-upload-list__item-actions"},[n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleDownload(i)}}},[n("i",{staticClass:"el-icon-download"})]),e._v(" "),n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(i)}}},[n("i",{staticClass:"el-icon-delete"})])])])}}])},[n("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1)},[],!1,null,"78aee46c",null));Ve.options.__file="anji-upload.vue";var ze=Ve.exports,He=n("OLzz"),Qe=n.n(He);n("cOfl");ae.beforeEach(function(e,t,n){Qe.a.start(),n()}),ae.afterEach(function(){Qe.a.done()});var Je={inserted:function(e,t,n){var i=t.value;0==Object(pe.g)(i)&&e.parentNode&&e.parentNode.removeChild(e)}},Ge=function(e){e.directive("permission",Je)};window.Vue&&(window.permission=Je,Vue.use(Ge)),Je.install=Ge;var Ke=Je,We=n("ML2P"),Xe=n.n(We);n("8Rg2");a.default.component("v-chart",$e.a),a.default.component("anji-upload",ze),a.default.component("anji-crud",Re.default),a.default.component("anji-select",Me),a.default.use(Ke),a.default.use(Xe.a),a.default.use(s.a,{zhLocale:c.a}),o()(i).forEach(function(e){a.default.filter(e,i[e])}),a.default.mixin(Pe),a.default.prototype.$pageSizeAll=[10,50,100,200,500],a.default.config.productionTip=!1,new a.default({el:"#app",router:ae,store:ee.a,render:function(e){return e(m)}})},WqPH:function(e,t,n){},X4fA:function(e,t,n){"use strict";n.d(t,"f",function(){return l}),n.d(t,"e",function(){return s}),n.d(t,"j",function(){return u}),n.d(t,"i",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return f}),n.d(t,"d",function(){return p}),n.d(t,"h",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"g",function(){return b});var i=n("XS0u"),r="AJReportToken",o="AJReportShareToken",a="AJReportUser";function l(){return Object(i.b)(r)}function s(){return null==Object(i.b)(o)?"":Object(i.b)(o)}function u(e){return Object(i.c)(r,e)}function c(e){return Object(i.c)(o,e)}function d(){return Object(i.a)(r)}function f(){return Object(i.a)(o)}function p(){return Object(i.b)(a)}function h(e){return Object(i.c)(a,e)}function m(){return Object(i.a)(a)}function b(e){return!0}},XS0u:function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var i=n("omC7"),r=n.n(i),o=n("Q2cO"),a=n.n(o);n("jJIE");function l(e,t){if(void 0!==t&&null!=t){var n=t;"object"==(void 0===t?"undefined":a()(t))&&(n=r()(t)),localStorage.setItem(e,n)}}function s(e){var t=localStorage.getItem(e);try{return JSON.parse(t)}catch(e){return t}}function u(e){localStorage.removeItem(e)}},YYHB:function(e,t,n){"use strict";var i=n("8Xku");n.n(i).a},aGE4:function(e,t,n){},"ba/L":function(e,t,n){"use strict";n.d(t,"e",function(){return u}),n.d(t,"b",function(){return c}),n.d(t,"f",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return h});var i=n("Asgo"),r=n.n(i),o=n("t3Un"),a=n("X4fA"),l=n("f0Pt"),s=n.n(l);function u(e){return Object(o.a)({url:"reportDashboard",method:"post",data:e})}function c(e){return Object(o.a)({url:"reportDashboard/"+e,headers:{"Share-Token":Object(a.e)(),Authorization:Object(a.f)()},method:"get"})}function d(e){return Object(o.a)({url:"dataSet/queryAllDataSet",method:"get"})}function f(e){return Object(o.a)({url:"dataSet/detailBysetId/"+e,method:"get"})}function p(e){return Object(o.a)({url:"reportDashboard/getData",method:"post",headers:{"Share-Token":Object(a.e)(),Authorization:Object(a.f)()},data:e})}function h(e){return new r.a(function(t){s()({method:"get",url:"./aj//reportDashboard/export",headers:{Authorization:Object(a.f)()},params:e,responseType:"blob"}).then(function(e){t(e.data)}).catch(function(e){t("error")})})}},dVUk:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a});var i=n("t3Un");function r(e){return Object(i.a)({url:"accessUser/login",method:"post",data:e})}function o(){return Object(i.a)({url:"accessUser/logout",method:"post"})}function a(e){return Object(i.a)({url:"/accessUser/updatePassword",method:"post",data:e})}},dW6S:function(e,t,n){"use strict";var i=n("eyUs");n.n(i).a},eaw9:function(e,t,n){},euga:function(e,t,n){},eyUs:function(e,t,n){},fu5x:function(e,t,n){"use strict";var i=n("WqPH");n.n(i).a},gaEW:function(e,t,n){},hk9y:function(e,t,n){},lnxG:function(e,t,n){},oveC:function(e,t,n){},rARe:function(e,t,n){},sYqA:function(e,t,n){"use strict";n.r(t);var i=n("cLjf"),r=n.n(i),o=n("hDQ3"),a=n.n(o),l=n("t3Un"),s={components:{},props:{url:{type:[String],default:function(){return""}},id:{type:[String],default:function(){return"id"}},label:{type:[String],default:function(){return""}},value:{type:[String],default:function(){return""}},labelName:String,enableFilter:Boolean,isOpen:Boolean},data:function(){return{filterText:"",treeData:[]}},computed:{},watch:{filterText:function(e){this.$refs.table_tree.filter(e)}},mounted:function(){this.queryData()},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},queryData:function(){var e=this;this.isBlank(this.url)||Object(l.a)({url:this.url,method:"GET"}).then(function(t){"200"==t.code&&(e.treeData="[object Array]"==Object.prototype.toString.call(t.data)?t.data:t.data.tree||t.data.menuTree)})},nodeClick:function(e){this.$emit("input",e.id),this.$emit("node-click",e.id)},checkedEvent:function(e,t){var n=t.checkedKeys.toString();this.$emit("input",n)}}},u=(n("RXVF"),n("ZrdR")),c=Object(u.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.enableFilter?n("el-input",{staticClass:"filterInput",attrs:{placeholder:"搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}):e._e(),e._v(" "),n("div",{staticClass:"title"},[e._v(e._s(e.labelName))]),e._v(" "),n("el-tree",{ref:"table_tree",attrs:{data:e.treeData,"node-key":"id","default-expand-all":e.isOpen,"expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.nodeClick,check:e.checkedEvent}})],1)},[],!1,null,"0b9e713f",null);c.options.__file="anji-tree.vue";var d=c.exports,f=n("Q2cO"),p=n.n(f),h=n("omC7"),m=n.n(h),b={components:{},props:{modelType:String,showDialog:Boolean,option:{type:[Object],default:function(){return{title:"",labelWidth:"",queryFormFields:[],buttons:{query:{},edit:{},delete:{},add:{}},columns:[],formChange:function(e,t,n,i){}}}},relateData:{type:[Object],default:function(){return{}}},value:{type:[Object],default:function(){return{}}}},data:function(){return{cardRowColNum:this.option.rowColForm||2,editForm:{}}},computed:{primaryKeyFieldName:function(){var e=this.option.columns.find(function(e){return 1==e.primaryKey});return null!=e?e.field:null},joinColumn:function(){var e=this.option.joinColumn;return this.isBlank(e)&&(console.warn("在joinEntity中查找joinColumn属性失败，会导致查询详情和删除失败"),e=""),e},formFields:function(){var e=this;if(null==this.option.columns)return[];var t=this.deepClone(this.option.columns);return t=t.map(function(t){return e.isBlank(t.editField)&&(t.editField=t.field),e.isBlank(t.group)&&(t.group="其它"),t})},cardRowColSpan:function(){return 24/this.cardRowColNum},columnGroups:function(){return this.isBlank(this.formFields)?[]:this.formFields.map(function(e){return e.group}).filter(function(e,t,n){return n.indexOf(e)==t})},groupFormFields:function(){if(this.showDialog){var e={};return this.columnGroups.forEach(function(t,n,i){e[t]=[]}),this.formFields.forEach(function(t,n,i){e[t.group].push(t)}),e}return[]},groupModel:function(){return this.columnGroups.length>1}},created:function(){this.$watch(function(){return this.value},function(e,t){this.editForm=e,this.formChange()}),this.$watch(function(){return this.relateData[this.joinColumn]},function(e,t){if(this.isBlank(this.relateData))return this.cardRowColNum=2,void(this.editForm={});this.isNotBlank(e)&&this.queryDetail()})},mounted:function(){this.isNotBlank(this.value)&&(this.editForm=this.value,this.formChange()),this.isNotBlank(this.relateData)&&this.isNotBlank(this.relateData[this.joinColumn])&&this.queryDetail()},methods:{fieldIsHide:function(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("add"==this.modelType)return e.indexOf("hideOnAdd")>=0;if("view"==this.modelType)return e.indexOf("hideOnView")>=0;if("edit"==this.modelType)return e.indexOf("hideOnEdit")>=0}return!1},fieldIsDisable:function(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("add"==this.modelType)return e.indexOf("disableOnAdd")>=0;if("view"==this.modelType)return e.indexOf("disableOnView")>=0;if("edit"==this.modelType)return e.indexOf("disableOnEdit")>=0}return!1},handleSetRowColNum:function(e){this.cardRowColNum=e,this.$emit("changeRowColNum",e)},queryDetail:function(){var e=this;return a()(r.a.mark(function t(){var n,i,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.relateData,t.next=3,e.option.buttons.queryByPrimarykey.api(n);case 3:if(i=t.sent,o=i.data,"200"==i.code){t.next=8;break}return t.abrupt("return");case 8:e.editForm=o,e.formChange();case 10:case"end":return t.stop()}},t,e)}))()},validate:function(e){var t=this;this.$refs.editForm.validate(function(){var n=a()(r.a.mark(function n(i,o){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:null!=e&&e(i);case 1:case"end":return t.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}())},handleSave:function(e){var t=this;this.$refs.editForm.validate(function(){var n=a()(r.a.mark(function n(i,o){var a,l,s,u,c,d;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!i){n.next=20;break}if("add"!=t.modelType){n.next=11;break}return"function"==typeof t.option.beforeInsert&&t.option.beforeInsert(t.relateData,t.editForm),n.next=5,t.option.buttons.add.api(t.editForm);case 5:a=n.sent,l=a.code,s=a.message,"200"==l?null!=e&&e():console.log("提交表单调用新增接口失败："+s),n.next=18;break;case 11:return"function"==typeof t.option.beforeUpdate&&t.option.beforeUpdate(t.relateData,t.editForm),n.next=14,t.option.buttons.edit.api(t.editForm);case 14:u=n.sent,c=u.code,d=u.message,"200"==c?null!=e&&e():console.log("提交表单调用更新接口失败："+d);case 18:n.next=21;break;case 20:console.log("表单校验失败");case 21:case"end":return n.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}())},formChange:function(e,t,n){this.$emit("input",this.editForm),"function"==typeof this.option.formChange&&this.option.formChange(this.editForm,e,t,n)}}},v=(n("wTyl"),Object(u.a)(b,function(){var e=this,t=e.$createElement,n=e._self._c||t;return null==e.option.hide||0==e.option.hide?n("div",{staticClass:"anji-card"},[n("div",{staticClass:"card-head"},[e._v("\n    "+e._s(e.option.title)+"\n    "),n("div",{staticClass:"main-card-header-button"},[n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleSetRowColNum(4)}}},[e._v("||||")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleSetRowColNum(3)}}},[e._v("|||")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleSetRowColNum(2)}}},[e._v("||")])],1)]),e._v(" "),n("div",{staticClass:"card-body"},[n("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":e.option.labelWidth||"100px"}},[e._l(e.columnGroups,function(t){return[e.groupModel?n("el-divider",{key:t,attrs:{"content-position":"left"}},[e._v(e._s(t))]):e._e(),e._v(" "),n("el-row",{key:t,staticClass:"form_table"},[e._l(e.groupFormFields[t],function(t){return[0==e.fieldIsHide(t.editHide)?n("el-col",{key:t.editField,attrs:{span:null==t.rowColSpan?e.cardRowColSpan:t.rowColSpan}},[n("el-form-item",{attrs:{label:t.label,rules:t.rules,prop:t.editField,disabled:t.disabled}},[""!=t.tips&&null!=t.tips?n("span",{staticClass:"input_tips",style:{"margin-left":"-13px"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.tips,placement:"top-start"}},[n("svg-icon",{attrs:{"icon-class":"tishi-yiwen"}})],1)],1):e._e(),e._v(" "),"input"==t.inputType?n("el-input",{attrs:{placeholder:t.placeholder||"请输入",clearable:!1!==t.clearable,disabled:e.fieldIsDisable(t.disabled)},on:{change:function(n){return e.formChange(t.editField,n,null)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):"switch"==t.inputType?n("el-switch",{attrs:{disabled:e.fieldIsDisable(t.disabled),"active-value":1,"inactive-value":0,"inactive-color":"#ccc","active-color":"#5887fb"},on:{change:function(n){return e.formChange(t.editField,n,null)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):"input-number"==t.inputType?n("el-input-number",{attrs:{min:t.inputNumberOption.min,max:t.inputNumberOption.max,placeholder:t.placeholder||"请输入",clearable:!1!==t.clearable,disabled:e.fieldIsDisable(t.disabled)},on:{change:function(n){return e.formChange(t.editField,n,null)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):"anji-input"==t.inputType?n("anji-input",{attrs:{unit:t.anjiInput.unit,"default-unit":t.anjiInput.defaultUnit,placeholder:t.placeholder||"请输入",clearable:!1!==t.clearable,disabled:e.fieldIsDisable(t.disabled)},on:{change:function(n){return e.formChange(t.editField,n,null)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):"anji-select"==t.inputType?n("anji-select",{attrs:{"allow-create":t.anjiSelectOption.allowCreate,multiple:t.anjiSelectOption.multiple,disabled:e.fieldIsDisable(t.disabled),"dict-code":t.anjiSelectOption.dictCode,placeholder:t.placeholder,url:t.anjiSelectOption.url,method:t.anjiSelectOption.method,"query-param":t.anjiSelectOption.queryParam,"merge-label":t.anjiSelectOption.mergeLabel,option:t.anjiSelectOption.option,label:t.anjiSelectOption.label,"remote-filter":t.anjiSelectOption.remoteFilter,"disabled-options":t.anjiSelectOption.disabledOptions,"select-keyword":t.anjiSelectOption.selectKeyword},on:{change:function(n,i){return e.formChange(t.editField,n,i)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):t.inputType.indexOf("date")>=0?n("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder||"请选择",type:t.inputType,format:t.format,"value-format":t.valueFormat,disabled:e.fieldIsDisable(t.disabled),clearable:!1!==t.clearable},on:{change:function(n){return e.formChange(t.editField,n,null)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,n)},expression:"editForm[item.editField]"}}):"checkbox"==t.inputType?n("anji-checkbox",{attrs:{"dict-code":t.anjiCheckbox.dictCode,url:t.anjiCheckbox.url,label:t.anjiCheckbox.label,disabled:e.fieldIsDisable(t.disabled)},on:{change:function(n,i){return e.formChange(t.editField,n,i)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):"anji-cascader"==t.inputType?n("anji-cascader",{attrs:{disabled:e.fieldIsDisable(t.disabled),"single-display":t.anjiCascader.singleDisplay,url:t.anjiCascader.url},on:{change:function(n){return e.formChange(t.editField,n,null)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):"anji-upload"==t.inputType?n("anji-upload",{attrs:{"up-load-url":t.anjiUpload.upLoadUrl,"view-url":t.anjiUpload.viewUrl,"upload-type":t.anjiUpload.uploadType,limit:t.anjiUpload.limit},on:{change:function(n){return e.formChange(t.editField,n,null)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):"anji-autocomplete"==t.inputType?n("anji-autocomplete",{attrs:{disabled:e.fieldIsDisable(t.disabled),label:t.anjiAutocomplete.label,option:t.anjiAutocomplete.option,"appoint-value":t.anjiAutocomplete.appointValue,url:t.anjiAutocomplete.url},on:{change:function(n,i){return e.formChange(t.editField,n,i)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):"textarea"==t.inputType?n("el-input",{attrs:{placeholder:t.placeholder||"请输入",clearable:!1!==t.clearable,disabled:e.fieldIsDisable(t.disabled),type:"textarea",rows:2},on:{change:function(n){return e.formChange(t.editField,n,null)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):"anji-country"==t.inputType?n("anji-fourlevel",{on:{change:function(n){return e.formChange(t.editField,n,null)}},model:{value:e.editForm[t.editField],callback:function(n){e.$set(e.editForm,t.editField,"string"==typeof n?n.trim():n)},expression:"editForm[item.editField]"}}):n("el-input",{attrs:{placeholder:"组件不支持此类型表单请至组件内部自行扩展",disabled:""}})],1)],1):e._e()]})],2)]})],2)],1)]):e._e()},[],!1,null,"36f1f9f6",null));v.options.__file="edit-form.vue";var g=v.exports,y={components:{},props:{modelType:String,option:{type:[Object],default:function(){return{title:"",labelWidth:"",queryFormFields:[],buttons:{query:{},edit:{},delete:{},add:{}},columns:[]}}},relateData:{type:[Object],default:function(){return{}}},value:{type:[Array],default:function(){return[]}},valueNew:{type:[Array],default:function(){return[]}}},data:function(){return{checkRecords:[],form:{records:[],total:0},saveButtonStatus:[],rowIdList:[]}},computed:{primaryKeyFieldName:function(){var e=this.option.columns.find(function(e){return 1==e.primaryKey});return null!=e?e.field:null},joinColumn:function(){var e=this.option.joinColumn;return this.isBlank(e)&&(console.warn("在columns中查找关联字段失败，会导致查询详情和删除失败，孙子关联表忽略该错误"),e=""),e},formRecordsUndelete:function(){return null==this.form.records?[]:this.form.records.filter(function(e){return null==e.deletedFlag||0==e.deletedFlag})}},watch:{},created:function(){this.isNotBlank(this.joinColumn)&&this.$watch(function(){return this.relateData[this.joinColumn]},function(e,t){this.isNotBlank(e)?this.handleQueryPageList(e):(this.checkRecords=[],this.form.records=[],this.form.total=0,this.saveButtonStatus=[])})},mounted:function(){this.isNotBlank(this.relateData)&&this.isNotBlank(this.relateData[this.joinColumn])&&this.handleQueryPageList()},methods:{fieldIsHide:function(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("add"==this.modelType)return e.indexOf("hideOnAdd")>=0;if("view"==this.modelType)return e.indexOf("hideOnView")>=0;if("edit"==this.modelType)return e.indexOf("hideOnEdit")>=0}return!1},getRowEditButton:function(e){return"inEditing"==this.saveButtonStatus[e]?"btn_savetemp":"inAdding"==this.saveButtonStatus[e]?"btn_savetemp":"inShow"==this.saveButtonStatus[e]?"btn_edit":"not_permission"},tableRowClassAdapter:function(e){var t=e.row,n=e.rowIndex;t.index=n},handleQueryPageList:function(e){var t=this;return a()(r.a.mark(function n(){var i;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.isBlank(e)&&(e=t.relateData[t.joinColumn]),(i={})[t.joinColumn]=e,t.queryPageList(i);case 4:case"end":return n.stop()}},n,t)}))()},queryPageList:function(e){var t=this;return a()(r.a.mark(function n(){var i,o,a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.isNotBlank(t.option.buttons.query.order)&&(e.sort=t.option.buttons.query.sort,e.order=t.option.buttons.query.order),n.next=3,t.option.buttons.query.api(e);case 3:if(i=n.sent,o=i.data,"200"==i.code){n.next=8;break}return n.abrupt("return");case 8:for(t.form.records=o.records,t.form.total=o.total,t.$emit("input",t.form.records),a=0;a<t.form.total;a++)t.saveButtonStatus.push("inShow");case 12:case"end":return n.stop()}},n,t)}))()},handleSelectionChange:function(e){this.checkRecords=e},handleTableRowClick:function(e,t,n){"function"==typeof this.option.tableRowClick&&this.option.tableRowClick(this.form.records,e,e.index,this.relateData)},tableRowChange:function(e,t,n,i){this.$emit("input",this.form.records),"function"==typeof this.option.tableChange&&this.option.tableChange(this.form.records,e,t,n,i,this.relateData)},handleAdd:function(){this.saveButtonStatus.push("inAdding"),this.form.records.push({})},handleUpdata:function(){this.saveButtonStatus=[],this.form.records=[]},handleAddOrUpdate:function(e,t){"inEditing"==this.saveButtonStatus[t]||"inAdding"==this.saveButtonStatus[t]?this.handleSaveTemp(e,t):this.$set(this.saveButtonStatus,t,"inEditing")},validate:function(e){var t=this;this.$refs.form.validate(function(){var n=a()(r.a.mark(function n(i,o){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:null!=e&&e(i);case 1:case"end":return t.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}())},handleSaveTemp:function(e,t){var n=this;return a()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:n.$refs.form.validate(function(i){i&&(n.isBlank(e[n.primaryKeyFieldName])?"function"==typeof n.option.beforeInsert&&n.option.beforeInsert(n.relateData,e):"function"==typeof n.option.beforeUpdate&&n.option.beforeUpdate(n.relateData,e),n.$set(n.saveButtonStatus,t,"inShow"),n.$emit("input",n.form.records))});case 1:case"end":return i.stop()}},i,n)}))()},handleDelete:function(e,t){var n=this;if(this.saveButtonStatus.splice(t,1),"inAdding"==this.saveButtonStatus[t])return this.form.records.splice(t,1),this.saveButtonStatus.splice(t,1),void this.$emit("input",this.form.records);var i=this.form.records.findIndex(function(t){return t[n.primaryKeyFieldName]==e[n.primaryKeyFieldName]});e.deletedFlag=!0,this.$set(this.form.records,i,e),this.$emit("input",this.form.records)}}},w=(n("sdkc"),Object(u.a)(y,function(){var e=this,t=e.$createElement,n=e._self._c||t;return null==e.option.hide||0==e.option.hide?n("div",{staticClass:"anji-card"},[n("div",{staticClass:"card-head"},[e._v(e._s(e.option.title))]),e._v(" "),n("div",{staticClass:"card-body"},[n("el-form",{ref:"form",attrs:{model:e.form}},[n("el-table",{attrs:{data:e.formRecordsUndelete,border:"","row-class-name":e.tableRowClassAdapter},on:{"selection-change":e.handleSelectionChange,"row-click":e.handleTableRowClick}},[n("el-table-column",{attrs:{label:"序号","min-width":"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.$index+1)+"\n          ")]}}],null,!1,896436857)}),e._v(" "),e._l(e.option.columns,function(t){return[1!=e.fieldIsHide(t.tableHide)&&"expand"!=t.columnType?n("el-table-column",{key:t.field,attrs:{label:t.label,"min-width":t.minWidth||110,align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[n("el-form-item",{attrs:{prop:"records."+i.$index+"."+t.field,rules:t.rules}},["input"==t.inputType?n("el-input",{attrs:{size:"small",placeholder:t.placeholder||"请输入",clearable:!1!==t.clearable,disabled:"inShow"==e.saveButtonStatus[i.$index]||t.disabled},on:{change:function(n){return e.tableRowChange(i.$index,t.field,n)}},model:{value:i.row[t.field],callback:function(n){e.$set(i.row,t.field,n)},expression:"scope.row[item.field]"}}):"switch"==t.inputType?n("el-switch",{attrs:{disabled:"inShow"==e.saveButtonStatus[i.$index]||t.disabled,"active-value":t.switchOption.disableValue,"inactive-value":t.switchOption.enableValue,"active-color":"#5887fb","inactive-color":"#ccc"},on:{change:function(n){return e.tableRowChange(i.$index,t.field,n)}},model:{value:i.row[t.field],callback:function(n){e.$set(i.row,t.field,n)},expression:"scope.row[item.field]"}}):"input-number"==t.inputType?n("el-input",{attrs:{size:"small",min:t.inputNumberOption.min,max:t.inputNumberOption.max,placeholder:t.placeholder||"请输入",clearable:!1!==t.clearable,disabled:"inShow"==e.saveButtonStatus[i.$index]||t.disabled},on:{change:function(n){return e.tableRowChange(i.$index,t.field,n)}},model:{value:i.row[t.field],callback:function(n){e.$set(i.row,t.field,n)},expression:"scope.row[item.field]"}}):"anji-input"==t.inputType?n("anji-input",{attrs:{"default-value":t.defaultValue,unit:t.anjiInput.unit,conversion:t.anjiInput.conversion,placeholder:t.placeholder||"请输入",clearable:!1!==t.clearable,disabled:"inShow"==e.saveButtonStatus[i.$index]||t.disabled},on:{change:function(n){return e.tableRowChange(i.$index,t.field,n)}},model:{value:i.row[t.field],callback:function(n){e.$set(i.row,t.field,"string"==typeof n?n.trim():n)},expression:"scope.row[item.field]"}}):"anji-select"==t.inputType?n("anji-select",{attrs:{multiple:t.anjiSelectOption.multiple,"default-value":t.defaultValue,"dict-code":t.anjiSelectOption.dictCode,url:t.anjiSelectOption.url,method:t.anjiSelectOption.method,"query-param":t.anjiSelectOption.queryParam,option:t.anjiSelectOption.option,label:t.anjiSelectOption.label,"disabled-options":t.anjiSelectOption.disabledOptions,disabled:"inShow"==e.saveButtonStatus[i.$index]||t.disabled},on:{change:function(n,r){return e.tableRowChange(i.$index,t.field,n,r)}},model:{value:i.row[t.field],callback:function(n){e.$set(i.row,t.field,"string"==typeof n?n.trim():n)},expression:"scope.row[item.field]"}}):t.inputType.indexOf("date")>=0?n("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder||"请选择",type:t.inputType,clearable:!1!==t.clearable,disabled:"inShow"==e.saveButtonStatus[i.$index]||t.disabled},on:{change:function(n){return e.tableRowChange(i.$index,t.field,n)}},model:{value:i.row[t.field],callback:function(n){e.$set(i.row,t.field,n)},expression:"scope.row[item.field]"}}):n("el-input",{attrs:{placeholder:"组件不支持此类型表单请至组件内部自行扩展",disabled:""}})],1)]}}],null,!0)}):e._e()]}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleAddOrUpdate(t.row,t.$index)}}},[e._v(e._s(e.getRowEditButton(t.$index)))]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleDelete(t.row,t.$index)}}},[e._v("删除")])]}}],null,!1,1921872996)})],2)],1),e._v(" "),"view"!=e.modelType?n("button",{staticClass:"table-add-row-button",on:{click:e.handleAdd}},[n("i",{staticClass:"el-icon-plus"}),e._v(" "),n("span",[e._v("新增")])]):e._e()],1)]):e._e()},[],!1,null,"563fdf1c",null));w.options.__file="edit-table.vue";var x={name:"EditDialog",components:{EditForm:g,EditTable:w.exports},props:{visible:{type:[Boolean],default:function(){return!1}},rowData:{type:[Object],default:function(){return{}}},handleDetailData:{type:Function,default:function(e){return e}},submitDetailData:{type:Function,default:function(e,t){return e}},modelType:String,option:{require:!0,type:Object,default:function(){return{title:"",labelWidth:"",queryFormFields:[],buttons:{query:{},edit:{},delete:{},add:{}},columns:[]}}}},data:function(){return{showDialog:!1,dialogFullScreen:!1,cardRowColNum:2,saveForm:{},countForValidJoinForm:0}},computed:{dialogWidth:function(){return 2==this.cardRowColNum?"60%":3==this.cardRowColNum?"70%":4==this.cardRowColNum?"80%":"60%"},joinEntitys:function(){return this.isBlank(this.option.joinEntitys)?[]:this.option.joinEntitys},countJoinEntityOneToOne:function(){var e=this.joinEntitys.filter(function(e){return"OneToOne"==e.joinType});return null==e?0:e.length}},watch:{visible:function(e,t){this.showDialog=e,this.initDefaultSaveForm()},rowData:function(e,t){null!=e&&this.queryByPrimarykey(e)}},mounted:function(){this.initDefaultSaveForm()},methods:{getSaveForm:function(){return this.saveForm},setSaveForm:function(e){this.saveForm=e},initDefaultSaveForm:function(){var e=this,t={};this.option.columns.forEach(function(n){var i=n.editField;e.isBlank(i)&&(i=n.field);var r=n.defaultValue;e.isNotBlank(r)&&(t[i]=r)}),this.saveForm=this.deepClone(t),console.log("编辑框默认值:"+m()(this.saveForm))},handleCloseDialog:function(e){this.initDefaultSaveForm(),this.showDialog=!1,this.dialogFullScreen=!1,this.cardRowColNum=2,this.countForValidJoinForm=0,this.$emit("closeEvent",e)},handleTopCloseDialog:function(){this.initDefaultSaveForm(),this.showDialog=!1,this.dialogFullScreen=!1,this.cardRowColNum=2,this.countForValidJoinForm=0},handleSetRowColNum:function(e){this.cardRowColNum=e},getComponentByJoinType:function(e,t){return"OneToOne"==e?"EditForm":"OneToMany"==e?"EditTable":""},queryByPrimarykey:function(e){var t=this;return a()(r.a.mark(function n(){var i,o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.option.buttons.queryByPrimarykey.api(e);case 2:if(i=n.sent,o=i.data,"200"==i.code){n.next=7;break}return n.abrupt("return");case 7:t.showDialog=!0,t.saveForm=t.handleDetailData(o);case 9:case"end":return n.stop()}},n,t)}))()},handleValidateAndSave:function(){var e=this;this.countForValidJoinForm=0,this.$refs.mainForm.validate(function(t){if(0!=t)if(console.log("主表单校验完成"),null!=e.joinEntitys&&0!=e.joinEntitys.length)for(var n=function(t){console.log("开始校验子表单-"+t+" 校验");var n=e.joinEntitys[t];if(console.log(n),null!=e.$refs["joinForm"+t]&&1!=n.hide&&null!=e.saveForm[n.fieldNameInMainEntityOnSave]&&0!=e.saveForm[n.fieldNameInMainEntityOnSave].length)return e.checkedChildrenValidate(e.saveForm[n.fieldNameInMainEntityOnSave],n.columns)?(e.countForValidJoinForm++,console.log("已经校验的子表单："+e.countForValidJoinForm+" 共："+e.joinEntitys.length),e.countForValidJoinForm==e.joinEntitys.length&&(console.log("子表单校验完成，提交主表单"),e.handleSave()),"continue"):{v:void 0};console.warn("子表单校验失败");var i=e.$refs["joinForm"+t];"[object Array]"==toString.call(i)&&(i=i[0]),i.validate(function(n){n?(e.countForValidJoinForm++,console.log("已经校验的子表单："+e.countForValidJoinForm+" 共："+e.joinEntitys.length),e.countForValidJoinForm==e.joinEntitys.length&&(console.log("子表单校验完成，提交主表单"),e.handleSave())):console.warn("子表单"+t+"校验失败:")})},i=0;i<e.joinEntitys.length;i++){var r=n(i);switch(r){case"continue":continue;default:if("object"===(void 0===r?"undefined":p()(r)))return r.v}}else e.handleSave();else console.warn("主表单校验失败")})},handleSave:function(){var e=this;return a()(r.a.mark(function t(){var n,i,o,a,l,s,u;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.submitDetailData(e.saveForm,e.modelType),"add"!=e.modelType){t.next=13;break}return t.next=4,e.option.buttons.add.api(n);case 4:if(i=t.sent,o=i.code,a=i.message,"200"!=o){t.next=12;break}return e.handleCloseDialog(),t.abrupt("return");case 12:console.log("提交表单调用新增接口失败："+a);case 13:if("edit"!=e.modelType){t.next=25;break}return t.next=16,e.option.buttons.edit.api(n);case 16:if(l=t.sent,s=l.code,u=l.message,"200"!=s){t.next=24;break}return e.handleCloseDialog(),t.abrupt("return");case 24:console.log("提交表单调用更新接口失败："+u);case 25:case"end":return t.stop()}},t,e)}))()},checkedChildrenValidate:function(e,t){for(var n=t.map(function(e){return e.field}),i=0;i<e.length;i++)for(var r=e[i],o=0;o<n.length;o++)if(r.hasOwnProperty(n[o])&&!r[n[o]])return!1;return!0}}},C=(n("N4Kv"),Object(u.a)(x,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{class:e.dialogFullScreen?"full-screen":"notfull-screen",attrs:{width:e.dialogWidth,"close-on-click-modal":!1,center:"",visible:e.showDialog,fullscreen:e.dialogFullScreen},on:{"update:visible":function(t){e.showDialog=t},close:function(t){return e.handleCloseDialog("close")}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n    "+e._s(e.option.title+"--"+e.modelType)+"\n    "),n("button",{staticClass:"el-dialog__headerbtn",staticStyle:{right:"50px"},attrs:{type:"button","aria-label":"Close"},on:{click:function(t){e.dialogFullScreen=!e.dialogFullScreen}}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-full-screen"})])]},proxy:!0}])},[e._v(" "),n("EditForm",{ref:"mainForm",tag:"component",attrs:{option:e.option,"model-type":e.modelType,"show-dialog":e.showDialog},on:{changeRowColNum:e.handleSetRowColNum},model:{value:e.saveForm,callback:function(t){e.saveForm=t},expression:"saveForm"}}),e._v(" "),e._l(e.joinEntitys,function(t,i){return[n(e.getComponentByJoinType(t.joinType,t),{key:i,ref:"joinForm"+i,refInFor:!0,tag:"component",attrs:{"value-new":e.saveForm[t.fieldNameInMainEntityOnId],option:t,"model-type":e.modelType,"relate-data":e.saveForm},on:{"update:valueNew":function(n){return e.$set(e.saveForm,t.fieldNameInMainEntityOnId,n)},"update:value-new":function(n){return e.$set(e.saveForm,t.fieldNameInMainEntityOnId,n)}},model:{value:e.saveForm[t.fieldNameInMainEntityOnSave],callback:function(n){e.$set(e.saveForm,t.fieldNameInMainEntityOnSave,n)},expression:"saveForm[item.fieldNameInMainEntityOnSave]"}}),e._v(" "),e._l(t.joinEntitys,function(t,r){return[n(e.getComponentByJoinType(t.joinType,t),{key:i+"."+r,ref:"grandsonForm",refInFor:!0,tag:"component",attrs:{option:t,"model-type":e.modelType,"relate-data":e.saveForm}})]})]}),e._v(" "),e._t("customCard"),e._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},["edit"==e.modelType?e._t("editBtn",null,{rowData:e.rowData}):e._e(),e._v(" "),n("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){return e.handleCloseDialog("close")}}},[e._v("关闭")]),e._v(" "),"view"!=e.modelType?n("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handleValidateAndSave}},[e._v("保存")]):e._e()],2)],2)},[],!1,null,"283ef73e",null));C.options.__file="edit.vue";var k=C.exports,F={props:{styleObj:Object,visible:Boolean},data:function(){return{}},watch:{visible:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},methods:{closeMenu:function(){this.$emit("update:visible",!1)}}},S=(n("HK11"),Object(u.a)(F,function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"contentmenu",style:this.styleObj},[this._t("default")],2)},[],!1,null,"15ce4a3d",null));S.options.__file="anji-contextMenu.vue";var _={components:{EditDialog:k,AnjiTree:d,anjiContextMenu:S.exports},props:{option:{require:!0,type:Object,default:function(){return{formHeight:(void 0).$refs.formSearch.$el.offsetHeight,labelWidth:"120px",queryFormHide:!1,queryFormFields:[],buttons:{query:{},edit:{},delete:{},add:{}},columns:[],queryFormChange:function(e,t){}}}}},data:function(){return{queryParams:{showMoreSearch:!1,pageNumber:1,pageSize:10,order:"",sort:""},checkRecords:[],records:[],total:0,editDialogOpen:!1,editDialogRowData:{},editDialogModelType:"view",hasCustomButtonInRowMore:!1,isShowRowContextMenu:!1,contextMenuConfigStyle:{},contextMenuRow:{}}},computed:{queryFormTreeHide:function(){return null!=this.option.queryFormHide&&1==this.option.queryFormHide},queryFormTreeField:function(){return this.option.queryFormFields.find(function(e){return"anji-tree"==e.inputType})},hasTreeFieldInQueryForm:function(){return this.isNotBlank(this.queryFormTreeField)},queryFormFieldExcludeTree:function(){return this.option.queryFormFields.filter(function(e){return"anji-tree"!=e.inputType})},primaryKeyFieldName:function(){var e=this.option.columns.find(function(e){return 1==e.primaryKey});return null!=e?e.field:null},tableExpandColumns:function(){return this.option.columns.filter(function(e){return"expand"==e.columnType})},disableBatchDelete:function(){return this.checkRecords.length<=0}},created:function(){var e=this;this.option.queryFormFields.forEach(function(t){e.$set(e.queryParams,t.field,t.defaultValue||null)}),(this.option.skipQuery||void 0==this.option.skipQuery)&&this.handleQueryForm("query"),this.queryFormChange()},mounted:function(){null!=this.$scopedSlots.rowButtonInMore?this.hasCustomButtonInRowMore=!0:this.hasCustomButtonInRowMore=!1,console.log("是否有自定义行按钮: "+this.hasCustomButtonInRowMore)},methods:{queryFormFieldSpan:function(e){return null!=e.span?e.span:6},handleToggleMoreSearch:function(){this.queryParams.showMoreSearch=!this.queryParams.showMoreSearch},handleSortChange:function(e){if(null!=e&&null!=e.prop){var t=e.prop,n="ascending"==e.order?"ASC":"DESC";this.queryParams.sort=t,this.queryParams.order=n,this.handleQueryForm("query")}else console.warn("排序字段名prop为空，无法排序")},handleQueryForm:function(e){if("query"==e&&this.hasTreeFieldInQueryForm&&delete this.queryParams[this.queryFormTreeField.field],"tree"==e&&this.hasTreeFieldInQueryForm){var t=this.queryParams[this.queryFormTreeField.field];this.queryParams={showMoreSearch:!1,pageNumber:1,pageSize:10},this.queryParams[this.queryFormTreeField.field]=t}if(this.isBlank(this.queryParams.order)&&this.isNotBlank(this.option.buttons.query.order)&&(this.queryParams.sort=this.option.buttons.query.sort,this.queryParams.order=this.option.buttons.query.order),this.queryParams.pageNumber=1,this.option.buttons.query.params){var n=this.option.buttons.query.params;for(var i in n)this.queryParams[i]=n[i]}this.handleQueryPageList()},handleAddQueryParams:function(e,t){this.queryParams[e]=t},handleQueryPageList:function(){var e=this;return a()(r.a.mark(function t(){var n,i,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.urlEncodeObject(e.queryParams,"order,sort"),t.next=3,e.option.buttons.query.api(n);case 3:if(i=t.sent,o=i.data,"200"==i.code){t.next=8;break}return t.abrupt("return");case 8:e.records=o.records,e.total=o.total;case 10:case"end":return t.stop()}},t,e)}))()},handleResetForm:function(){var e=this,t=this.queryParams.showMoreSearch;this.queryParams={order:"",sort:"",pageNumber:1,pageSize:10,showMoreSearch:t},this.option.queryFormFields.forEach(function(t){t.disabled&&(e.queryParams[t.field]=t.defaultValue)})},handleTreeNodeCheck:function(){this.handleQueryForm("tree");for(var e=this.queryFormTreeField.field,t=0;t<this.option.columns.length;t++){var n=this.option.columns[t];if(n.editField==e||n.field==e){this.$set(this.option.columns[t],"defaultValue",this.queryParams[e]);break}}},handleOpenEditView:function(e,t){"view"!=e&&"edit"!=e||(this.editDialogRowData=t),this.editDialogModelType=e,"add"==e&&(this.editDialogOpen=!0);var n={type:e,value:t};this.$emit("handleCustomValue",n)},handlegetLable:function(e,t){return"function"==typeof t?t(e):t},isDisabledButton:function(e,t){return"function"==typeof e.isDisable?e.isDisable(t):!!e.disabled},isHide:function(e,t){return"function"==typeof e.isHide?e.isHide(t):!e.isHide},editDialogClosedEvent:function(e){this.editDialogOpen=!1,this.hasTreeFieldInQueryForm&&null!=this.$refs.queryFormTree&&!e&&this.$refs.queryFormTree.queryData(),this.$emit("handleCustomClose"),this.handleQueryPageList(),this.$refs.edit.$refs.mainForm.$refs.editForm.resetFields()},handleDeleteBatch:function(e){var t=this,n=[];null!=e?n.push(e[this.primaryKeyFieldName]):n=this.checkRecords.map(function(e){return e[t.primaryKeyFieldName]}),this.$confirm("删除确认","确认要删除吗?",{type:"warning",confirmButtonClass:"delete_sure",cancelButtonClass:"el-button--danger is-plain"}).then(function(){t.option.buttons.delete.api(n).then(function(e){t.checkRecords=[],t.hasTreeFieldInQueryForm&&null!=t.$refs.queryFormTree&&t.$refs.queryFormTree.queryData(),t.handleQueryPageList()})}).catch(function(e){})},handleSelectionChange:function(e){var t=this;e.length>0?e.forEach(function(e){t.records.forEach(function(t){e.id==t.id&&(t.dblClickFlag=!0,t.bgColor=!0)})}):this.records.forEach(function(e){e.dblClickFlag=!1,e.bgColor=!1}),this.isShowRowContextMenu=!1,this.checkRecords=e},handleSelectionDblclick:function(e){e.dblClickFlag=!e.dblClickFlag,e.bgColor=e.dblClickFlag,this.$refs.tables.toggleRowSelection(e,e.dblClickFlag)},rowContextMenu:function(e,t,n){var i=this;n.preventDefault(),this.option.contextMenu.forEach(function(e){"all"==e.flag?e.disabled=!(i.checkRecords.length>1):e.disabled=i.checkRecords.length>1}),this.contextMenuConfigStyle={left:n.clientX+"px",top:n.clientY+"px",display:"block"},this.contextMenuRow=e,this.isShowRowContextMenu=!0},handleContextMenuItem:function(e){"all"==e.flag?e.click({selection:this.checkRecords}):e.click({msg:this.contextMenuRow})},handleCurrentChange:function(e){this.queryParams.pageNumber=e,this.handleQueryPageList()},handleSizeChange:function(e){this.queryParams.pageNumber=1,this.queryParams.pageSize=e,this.handleQueryPageList()},fieldLabel:function(e){var t="",n=this.getSettingByName("unit_conversion"),i={};for(var r in n)e.anjiInput&&-1!=r.toLowerCase().indexOf(e.anjiInput.unit.toLowerCase())&&(i[r]=n[r]);for(var o in i)-1!=o.toLowerCase().indexOf("text")&&(t=i[o]);return null==e?"":"anji-input"==e.inputType&&null!=e.anjiInput?void 0==e.anjiInput.defaultUnit?e.label+"("+t+")":e.label+"("+e.anjiInput.defaultUnit+")":e.label},fieldValueByAnjiInput:function(e,t){var n=this.getSettingByName("unit_conversion"),i="",r="",o=[],a={};for(var l in n)t.anjiInput&&-1!=l.toLowerCase().indexOf(t.anjiInput.unit.toLowerCase())&&(a[l]=n[l]);for(var s in a)-1!=s.toLowerCase().indexOf("conversion")&&-1==s.toLowerCase().indexOf("conversiontext")&&-1==s.toLowerCase().indexOf("conversionradiogroup")&&(i=a[s]),-1!=s.toLowerCase().indexOf("keeppoint")&&(r=a[s]),Array.isArray(a[s])&&(o=a[s]);return null==t?e:"anji-input"!=t.inputType||null==t.anjiInput?e:void 0==t.anjiInput.defaultUnit?(e/i).toFixed(r||2):(e/o.find(function(e){return e.label==t.anjiInput.defaultUnit}).value).toFixed(r||2)},fieldValueByRowRenderer:function(e,t){return null==t||"function"!=typeof t.fieldTableRowRenderer?e[t.field]:t.fieldTableRowRenderer(e)},getMainEntity:function(){return this.$refs.edit.getSaveForm()},setMainEntity:function(e){this.$refs.edit.setSaveForm(e)},switchChange:function(e,t){var n=this;return a()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:Object(l.a)({url:t.url,method:"put",headers:{noPrompt:!1},data:[e.id]}).then(function(e){n.handleQueryPageList()});case 1:case"end":return i.stop()}},i,n)}))()},queryFormChange:function(e,t){"function"==typeof this.option.queryFormChange&&this.option.queryFormChange(this.queryParams,e,t)},tableRowClassName:function(e){var t=e.row,n=e.rowIndex;return!t.urgentFlag&&!t.tableRow||t.bgColor?(t.urgentFlag||t.tableRow)&&t.bgColor?"warning-row bgColor":t.urgentFlag&&t.tableRow||!t.bgColor?(n+1)%2==0?"success-row":void 0:"bgColor":"warning-row"}}},j=(n("YYHB"),Object(u.a)(_,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.hasTreeFieldInQueryForm?"page-container":"app-container"]},[e.hasTreeFieldInQueryForm?n("div",{staticClass:"left-container"},[n("AnjiTree",{ref:"queryFormTree",attrs:{"is-open":e.queryFormTreeField.anjiTreeOption.isOpen,"enable-filter":e.queryFormTreeField.anjiTreeOption.enableFilter,"label-name":e.queryFormTreeField.label,url:e.queryFormTreeField.anjiTreeOption.url},on:{"node-click":e.handleTreeNodeCheck},model:{value:e.queryParams[e.queryFormTreeField.field],callback:function(t){e.$set(e.queryParams,e.queryFormTreeField.field,"string"==typeof t?t.trim():t)},expression:"queryParams[queryFormTreeField.field]"}})],1):e._e(),e._v(" "),n("div",{staticClass:"right-container"},[n("div",{staticClass:"top_part"},[0==e.queryFormTreeHide?n("el-form",{ref:"formSearch",staticStyle:{"border-bottom":"1px solid #dbdde3","margin-bottom":"10px"},attrs:{model:e.queryParams,"label-width":"100px"}},[n("div",{staticClass:"screenFlex"},[n("div",{staticClass:"searchFormFlex"},[n("el-row",[e._l(e.queryFormFieldExcludeTree,function(t,i){return[i<3||e.queryParams.showMoreSearch?n("el-col",{key:t.field,attrs:{span:8}},[n("el-form-item",{attrs:{label:t.label,rules:t.rules,prop:t.field}},["input"==t.inputType||"input-number"==t.inputType?n("el-input",{attrs:{placeholder:t.placeholder||"请输入",clearable:!1!==t.clearable,disabled:t.disabled},on:{change:function(n){return e.queryFormChange(t.field,n)}},model:{value:e.queryParams[t.field],callback:function(n){e.$set(e.queryParams,t.field,"string"==typeof n?n.trim():n)},expression:"queryParams[item.field]"}}):"switch"==t.inputType?n("el-switch",{attrs:{disabled:t.disabled,"active-value":t.switchOption.disableValue,"inactive-value":t.switchOption.enableValue,"active-color":"#5887fb","inactive-color":"#ccc"},on:{change:function(n){return e.queryFormChange(t.field,n)}},model:{value:e.queryParams[t.field],callback:function(n){e.$set(e.queryParams,t.field,"string"==typeof n?n.trim():n)},expression:"queryParams[item.field]"}}):"anji-select"==t.inputType?n("anji-select",{attrs:{multiple:t.anjiSelectOption.multiple,"dict-code":t.anjiSelectOption.dictCode,url:t.anjiSelectOption.url,method:t.anjiSelectOption.method,"query-param":t.anjiSelectOption.queryParam,option:t.anjiSelectOption.option,label:t.anjiSelectOption.label,"disabled-options":t.anjiSelectOption.disabledOptions,disabled:t.disabled,"merge-label":t.anjiSelectOption.mergeLabel,"local-options":t.anjiSelectOption.localOptions},on:{change:function(n){return e.queryFormChange(t.field,n)}},model:{value:e.queryParams[t.field],callback:function(n){e.$set(e.queryParams,t.field,"string"==typeof n?n.trim():n)},expression:"queryParams[item.field]"}}):t.inputType.indexOf("date")>=0?n("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder||"请选择",type:t.inputType,format:t.format,"value-format":t.valueFormat,clearable:!1!==t.clearable},on:{change:function(n){return e.queryFormChange(t.field,n)}},model:{value:e.queryParams[t.field],callback:function(n){e.$set(e.queryParams,t.field,n)},expression:"queryParams[item.field]"}}):"anji-cascader"==t.inputType?n("anji-cascader",{attrs:{disabled:t.disabled,"single-display":t.anjiCascader.singleDisplay,url:t.anjiCascader.url},on:{change:function(n){return e.queryFormChange(t.field,n,null)}},model:{value:e.queryParams[t.field],callback:function(n){e.$set(e.queryParams,t.field,"string"==typeof n?n.trim():n)},expression:"queryParams[item.field]"}}):n("el-input",{attrs:{placeholder:"组件不支持此类型表单请至组件内部自行扩展",disabled:""}})],1)],1):e._e()]})],2)],1),e._v(" "),n("div",{staticClass:"screenButtons"},[e.queryFormFieldExcludeTree.length>3?n("el-button",{staticClass:"button",attrs:{size:"mini",plain:""},on:{click:e.handleToggleMoreSearch}},[n("i",{class:e.queryParams.showMoreSearch?"el-icon-arrow-up":"el-icon-arrow-down"}),e._v("\n              "+e._s(1==e.queryParams.showMoreSearch?"展开":"收起")+"\n            ")]):e._e(),e._v(" "),n("el-button",{staticClass:"button",attrs:{size:"mini",plain:""},on:{click:function(t){return e.handleResetForm()}}},[e._v("重置")]),e._v(" "),n("el-button",{staticClass:"button",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleQueryForm("query")}}},[e._v("查询")])],1)])]):e._e(),e._v(" "),n("div",{staticStyle:{"padding-bottom":"8px"}},[e._t("tableButtons",null,{selection:e.checkRecords}),e._v(" "),e._l(e.option.tableButtons,function(t,i){return n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:t.permission,expression:"item.permission"}],key:i,staticClass:"tableButton",attrs:{plain:t.plain,icon:t.icon,type:t.type,disabled:e.isDisabledButton(t,e.checkRecords)},on:{click:function(n){return t.click(e.checkRecords)}}},[e._v(e._s(e.handlegetLable(e.checkRecords,t.label)))])})],2)],1),e._v(" "),n("div",{staticClass:"main_part"},[n("div",{staticClass:"page_main"},[n("el-table",{ref:"tables",staticClass:"elTable",attrs:{align:"center",data:e.records,"row-class-name":e.tableRowClassName,border:""},on:{"selection-change":e.handleSelectionChange,"sort-change":e.handleSortChange,"row-dblclick":e.handleSelectionDblclick,"row-contextmenu":e.rowContextMenu}},[n("el-table-column",{attrs:{fixed:"",type:"selection",width:"50",align:"center"}}),e._v(" "),e.tableExpandColumns.length>0?n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.tableExpandColumns,function(i){return n("p",{key:i.field,staticClass:"table-expand-item"},[n("span",{staticClass:"titel"},[e._v(" "+e._s(i.label)+": ")]),e._v(" "),n("span",[e._v(e._s(t.row[i.field]))])])})}}],null,!1,3354752618)}):e._e(),e._v(" "),n("el-table-column",{attrs:{label:"序号","min-width":"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.queryParams.pageSize*(e.queryParams.pageNumber-1)+t.$index+1)+"\n            ")]}}])}),e._v(" "),e._l(e.option.columns,function(t,i){return[1!=t.tableHide&&"expand"!=t.columnType?n("el-table-column",{key:i,attrs:{prop:t.field,label:e.fieldLabel(t),"min-width":t.minWidth||110,sortable:t.sortable,"show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return["imgPreview"==t.columnType?n("div",[n("el-image",{staticStyle:{width:"25%",height:"50%"},attrs:{fit:"contain",src:i.row[t.field],"preview-src-list":[i.row[t.field]]}})],1):n("div",["switch"!=t.inputType||t.colorStyle?"anji-input"==t.inputType?n("span",[e._v(e._s(e.fieldValueByAnjiInput(i.row[t.field],t)))]):t.mergeColumn?n("span",[e._v(e._s(i.row[t.field])+"("+e._s(i.row[t.mergeColumn])+")")]):t.colorStyle?n("span",{class:t.colorStyle[i.row[t.editField]]},[e._v(e._s(e.fieldValueByRowRenderer(i.row,t)))]):n("span",[e._v(e._s(e.fieldValueByRowRenderer(i.row,t)))]):n("span",[n("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#5887fb","inactive-color":"#ccc"},on:{change:function(n){return e.switchChange(i.row,t.switchOption)}},model:{value:i.row[t.field],callback:function(n){e.$set(i.row,t.field,"string"==typeof n?n.trim():n)},expression:"scope.row[item.field]"}})],1)])]}}],null,!0)}):e._e()]}),e._v(" "),n("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:e.option.buttons.rowButtonsWidth||100},scopedSlots:e._u([{key:"default",fn:function(t){return[e.option.rowButtons.length<=2?n("div",[e._l(e.option.rowButtons,function(i,r){return[e.isHide(i,t.row)?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:i.permission,expression:"item.permission"}],key:r,attrs:{disabled:e.isDisabledButton(i,t.row),type:i.type||"text",size:"small"},on:{click:function(e){return i.click(t.row)}}},[e._v(e._s(e.handlegetLable(t.row,i.label)))]):e._e()]})],2):n("div",[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.option.rowButtons[0].permission,expression:"option.rowButtons[0].permission"}],attrs:{type:e.option.rowButtons[0].type||"text",disabled:e.isDisabledButton(e.option.rowButtons[0],t.row)},on:{click:function(n){return e.option.rowButtons[0].click(t.row)}}},[e._v(e._s(e.handlegetLable(t.row,e.option.rowButtons[0].label)))]),e._v(" "),n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                    更多\n                    "),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticClass:"clearfix"},[e._l(e.option.rowButtons.filter(function(e,t){return t>0}),function(i,r){return[e.isHide(i,t.row)?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:i.permission,expression:"item.permission"}],key:r,attrs:{type:i.type||"text",disabled:e.isDisabledButton(i,t.row),size:"small"},on:{click:function(e){return i.click(t.row)}}},[e._v(e._s(e.handlegetLable(t.row,i.label)))]):e._e()]})],2)],1)],1)],1)]}}])})],2),e._v(" "),n("div",{staticClass:"page_bottom"},[n("div",{staticClass:"pagination"},[n("div",[e._t("tableSelectionBtn",null,{selection:e.checkRecords})],2),e._v(" "),n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{background:"","current-page":e.queryParams.pageNumber,"page-sizes":e.$pageSizeAll,"page-size":e.queryParams.pageSize,layout:"total, prev, pager, next, jumper, sizes",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.queryParams,"pageNumber",t)},"update:current-page":function(t){return e.$set(e.queryParams,"pageNumber",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)]),e._v(" "),n("EditDialog",{ref:"edit",attrs:{"submit-detail-data":e.option.submitDetailData,"handle-detail-data":e.option.handleDetailData,option:e.option,"model-type":e.editDialogModelType,visible:e.editDialogOpen,"row-data":e.editDialogRowData},on:{closeEvent:e.editDialogClosedEvent},scopedSlots:e._u([{key:"customCard",fn:function(){return[e._t("cardInEditPage")]},proxy:!0},{key:"editBtn",fn:function(t){return[e._t("editBtnPage",null,{rowData:t})]}}],null,!0)})],1),e._v(" "),e._t("pageSection"),e._v(" "),n("anji-contextMenu",{attrs:{visible:e.isShowRowContextMenu,"style-obj":e.contextMenuConfigStyle},on:{"update:visible":function(t){e.isShowRowContextMenu=t}}},e._l(e.option.contextMenu,function(t,i){return n("div",{key:i,staticClass:"contextMenu"},[n("el-button",{staticClass:"contextMenuItem",attrs:{type:"text",disabled:t.disabled},on:{click:function(n){return e.handleContextMenuItem(t)}}},[e._v(e._s(t.label))])],1)}),0)],2)},[],!1,null,"6cb86315",null));j.options.__file="anji-crud.vue";t.default=j.exports},sdkc:function(e,t,n){"use strict";var i=n("VGgK");n.n(i).a},sm2R:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});var i=n("t3Un"),r=n("XS0u");function o(e){return Object(i.a)({url:"/gaeaDict/select/"+e,method:"get"})}function a(e){Object(i.a)({url:"/gaeaDict/all",method:"GET"}).then(function(t){200==t.code?(Object(r.c)("AJReportDict",t.data),null!=e&&e()):console.error("初始化数据字典到local storage失败: "+t.message)})}},sxct:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("iX2V");function r(e){return i(e+"gaea")}},t3Un:function(e,t,n){"use strict";var i=n("Asgo"),r=n.n(i),o=n("f0Pt"),a=n.n(o),l=n("Y7hl"),s=(n("Q2AE"),n("X4fA")),u=a.a.create({baseURL:"./aj/",timeout:2e4});u.interceptors.request.use(function(e){return e.headers.Authorization=null==Object(s.f)()||void 0==Object(s.f)()?"":Object(s.f)(),e},function(e){r.a.reject(e)}),u.interceptors.response.use(function(e){var t=e.data;if("50008"!=t.code&&"50012"!=t.code&&"50014"!=t.code)return"200"!==t.code?(Object(l.Message)({message:t.message,type:"error",duration:5e3}),e.data):e.data;l.MessageBox.confirm("你已被登出，可以取消继续留在该页面，或者重新登录","重新登录",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){sessionStorage.clear(),localStorage.clear(),window.location.href="/"})},function(e){return Object(l.Message)({message:e.message,type:"error",duration:5e3}),r.a.reject(e)}),t.a=u},vjVy:function(e,t,n){},wTyl:function(e,t,n){"use strict";var i=n("oveC");n.n(i).a},xtsh:function(e,t,n){"use strict";var i=n("eaw9");n.n(i).a}},[["Vtdi","runtime","chunk-libs"]]]);